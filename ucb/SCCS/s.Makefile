h18883
s 00002/00002/00111
d D 5.36 10/10/10 01:34:41 msokolov 36 35
c pstpipe added
e
s 00004/00003/00109
d D 5.35 05/01/07 19:24:36 msokolov 35 34
c add eps
c remove catemu
e
s 00006/00006/00106
d D 5.34 04/10/30 00:32:36 msokolov 34 33
c psrange and txtps moved into psutils subdirectory
e
s 00002/00002/00110
d D 5.33 04/10/26 17:29:42 msokolov 33 32
c add vtroff and vtools
e
s 00008/00008/00104
d D 5.32 04/10/22 05:58:48 msokolov 32 31
c add psrange
e
s 00010/00009/00102
d D 5.31 04/10/05 03:36:27 msokolov 31 30
c add text conversion utilities (UNIX<->RT-11, KOI8-E<->ISO, Russian UNIX<->DOS)
e
s 00002/00002/00109
d D 5.30 04/09/16 23:22:39 msokolov 30 29
c add catemu and vfont2ps
e
s 00001/00001/00110
d D 5.29 04/09/13 01:37:37 msokolov 29 28
c add mroff
e
s 00002/00002/00109
d D 5.28 02/12/19 14:42:14 msokolov 28 27
c add txtps
e
s 00007/00007/00104
d D 5.27 99/01/17 00:53:05 msokolov 27 26
c Remove lisp and vlp. Franz Lisp is now a separate package.
c Retire what. SCCS now comes standard with the system and has its own what.
c Add 20b. It's a standard utility now.
e
s 00000/00000/00000
d D 5.26 99/01/17 00:43:17 msokolov 26 25
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.25 99/01/17 00:43:17 msokolov 25 24
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.24 99/01/17 00:43:17 msokolov 24 23
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.23 99/01/17 00:43:17 msokolov 23 22
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.22 99/01/17 00:43:17 msokolov 22 21
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.21 99/01/17 00:43:17 msokolov 21 20
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.20 99/01/17 00:43:17 msokolov 20 19
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.19 99/01/17 00:43:17 msokolov 19 18
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.18 99/01/17 00:43:17 msokolov 18 17
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.17 99/01/17 00:43:17 msokolov 17 16
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.16 99/01/17 00:43:17 msokolov 16 15
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.15 99/01/17 00:43:17 msokolov 15 14
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.14 99/01/17 00:43:17 msokolov 14 13
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.13 99/01/17 00:43:17 msokolov 13 12
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.12 99/01/17 00:43:17 msokolov 12 11
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.11 99/01/17 00:43:17 msokolov 11 10
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.10 99/01/17 00:43:17 msokolov 10 9
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.9 99/01/17 00:43:17 msokolov 9 8
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.8 99/01/17 00:43:17 msokolov 8 7
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.7 99/01/17 00:43:17 msokolov 7 6
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.6 99/01/17 00:43:17 msokolov 6 5
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.5 99/01/17 00:43:17 msokolov 5 4
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.4 99/01/17 00:43:17 msokolov 4 3
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.3 99/01/17 00:43:17 msokolov 3 2
c bump it up to 5.26
e
s 00000/00000/00000
d D 5.2 99/01/17 00:43:17 msokolov 2 1
c bump it up to 5.26
e
s 00111/00000/00000
d D 5.1 99/01/17 00:43:17 msokolov 1 0
c This SCCS file has apparently been lost, reconstructing from version 5.26
e
u
U
t
T
I 1
#
# Copyright (c) 1980, 1988 Regents of the University of California.
# All rights reserved.
#
# Redistribution and use in source and binary forms are permitted
# provided that the above copyright notice and this paragraph are
# duplicated in all such forms and that any documentation,
# advertising materials, and other materials related to such
# distribution and use acknowledge that the software was developed
# by the University of California, Berkeley.  The name of the
# University may not be used to endorse or promote products derived
# from this software without specific prior written permission.
# THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR
# IMPLIED WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED
# WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.
#
#	%W% (Berkeley) %G%
#
DESTDIR=
CFLAGS=	-O
LIBC=	/lib/libc.a

# Programs that live in subdirectories, and have makefiles of their own.
#
# fp removed; it doesn't work
D 27
SUBDIR=	Mail compress ctags dbx error ex ftp gprof grep indent lisp man \
E 27
I 27
D 30
SUBDIR=	Mail compress ctags dbx error ex ftp gprof grep indent man \
E 30
I 30
D 35
SUBDIR=	Mail catemu compress ctags dbx error ex ftp gprof grep indent man \
E 35
I 35
SUBDIR=	Mail compress ctags dbx error ex ftp gprof grep indent man \
E 35
E 30
E 27
D 29
	more msgs netstat pascal rdist sendbug systat talk telnet tftp \
E 29
I 29
D 34
	more mroff msgs netstat pascal rdist sendbug systat talk telnet tftp \
E 29
D 27
	tn3270 tset vgrind vlp sysline window
E 27
I 27
D 30
	tn3270 tset vgrind sysline window
E 30
I 30
D 33
	tn3270 tset vfont2ps vgrind sysline window
E 33
I 33
	tn3270 tset vfont2ps vgrind vtools sysline window
E 34
I 34
D 36
	more mroff msgs netstat pascal psutils rdist sendbug systat talk \
	telnet tftp tn3270 tset vfont2ps vgrind vtools sysline window
E 36
I 36
	more mroff msgs netstat pascal pstpipe psutils rdist sendbug systat \
	talk telnet tftp tn3270 tset vfont2ps vgrind vtools sysline window
E 36
E 34
E 33
E 30
E 27

# Shell scripts that need only be installed and are never removed.
#
D 33
SCRIPT= which
E 33
I 33
SCRIPT= vtroff which
E 33

# C source that lives in the current directory
#
D 27
SRCS=	apply.c biff.c checknr.c clear.c colcrt.c colrm.c expand.c finger.c \
	fold.c from.c gcore.c groups.c head.c last.c lastcomm.c \
E 27
I 27
D 35
SRCS=	20b.c apply.c biff.c checknr.c clear.c colcrt.c colrm.c expand.c \
E 35
I 35
SRCS=	20b.c apply.c biff.c checknr.c clear.c colcrt.c colrm.c eps.c expand.c \
E 35
D 31
	finger.c fold.c from.c gcore.c groups.c head.c last.c lastcomm.c \
E 27
	leave.c lock.c logger.c mkstr.c printenv.c quota.c rlogin.c \
	rsh.c ruptime.c rwho.c sccs.c script.c soelim.c strings.c symorder.c \
D 28
	tail.c tcopy.c ul.c unexpand.c unifdef.c users.c \
E 28
I 28
	tail.c tcopy.c txtps.c ul.c unexpand.c unifdef.c users.c \
E 28
D 27
	vacation.c vmstat.c w.c wc.c what.c whereis.c whoami.c whois.c \
E 27
I 27
	vacation.c vmstat.c w.c wc.c whereis.c whoami.c whois.c \
E 27
	xstr.c yes.c
E 31
I 31
	finger.c fold.c from.c gcore.c groups.c head.c iso2koi8e.c koi8e2iso.c \
D 32
	last.c lastcomm.c leave.c lock.c logger.c mkstr.c printenv.c quota.c \
	rlogin.c rsh.c rt2unix.c ruptime.c rusdos2unix.c rusunix2dos.c rwho.c \
	sccs.c script.c soelim.c strings.c symorder.c tail.c tcopy.c txtps.c \
	ul.c unexpand.c unifdef.c unix2rt.c users.c vacation.c vmstat.c w.c \
	wc.c whereis.c whoami.c whois.c xstr.c yes.c
E 32
I 32
D 34
	last.c lastcomm.c leave.c lock.c logger.c mkstr.c printenv.c psrange.c \
E 34
I 34
	last.c lastcomm.c leave.c lock.c logger.c mkstr.c printenv.c \
E 34
	quota.c rlogin.c rsh.c rt2unix.c ruptime.c rusdos2unix.c rusunix2dos.c \
	rwho.c sccs.c script.c soelim.c strings.c symorder.c tail.c tcopy.c \
D 34
	txtps.c ul.c unexpand.c unifdef.c unix2rt.c users.c vacation.c \
E 34
I 34
	ul.c unexpand.c unifdef.c unix2rt.c users.c vacation.c \
E 34
	vmstat.c w.c wc.c whereis.c whoami.c whois.c xstr.c yes.c
E 32
E 31

# C programs that live in the current directory and do not need
# explicit make lines.
#
D 27
STD=	apply biff checknr colcrt colrm expand finger fold from \
E 27
I 27
STD=	20b apply biff checknr colcrt colrm expand finger fold from \
E 27
D 31
	groups head last lastcomm leave lock logger mkstr printenv \
D 28
	ruptime rwho sccs script soelim strings symorder tail tcopy \
E 28
I 28
	ruptime rwho sccs script soelim strings symorder tail tcopy txtps \
E 28
D 27
	unexpand unifdef users whereis whoami whois what wc xstr yes
E 27
I 27
	unexpand unifdef users whereis whoami whois wc xstr yes
E 31
I 31
	groups head iso2koi8e koi8e2iso last lastcomm leave lock logger mkstr \
D 32
	printenv rt2unix ruptime rusdos2unix rusunix2dos rwho sccs script \
	soelim strings symorder tail tcopy txtps unexpand unifdef unix2rt \
	users whereis whoami whois wc xstr yes
E 32
I 32
D 34
	printenv psrange rt2unix ruptime rusdos2unix rusunix2dos rwho sccs \
	script soelim strings symorder tail tcopy txtps unexpand unifdef \
E 34
I 34
	printenv rt2unix ruptime rusdos2unix rusunix2dos rwho sccs \
	script soelim strings symorder tail tcopy unexpand unifdef \
E 34
	unix2rt users whereis whoami whois wc xstr yes
E 32
E 31
E 27

# C programs that live in the current directory and need explicit make lines.
#
NSTD=	clear ul vacation

# Programs that get installed with special permissions
#
D 35
PERM=	gcore quota rlogin rsh vmstat w
E 35
I 35
PERM=	eps gcore quota rlogin rsh vmstat w
E 35

all:	${SUBDIR} ${STD} ${NSTD} ${PERM}

${SUBDIR}: FRC
	cd $@; make ${MFLAGS}

${STD} ${PERM}: ${LIBC}
	${CC} ${CFLAGS} -o $@ $@.c

install:
	-for i in ${SUBDIR}; do \
		(cd $$i; make ${MFLAGS} DESTDIR=${DESTDIR} install); done
	-for i in ${SCRIPT}; do \
		(install -c -o bin -g bin -m 755 $$i.csh ${DESTDIR}/usr/ucb/$$i); done
	install -s -o bin -g bin -m 755 ${STD} ${NSTD} ${DESTDIR}/usr/ucb
	install -s -o root -g bin -m 4755 quota ${DESTDIR}/usr/ucb/quota
	install -s -o root -g bin -m 4755 rlogin ${DESTDIR}/usr/ucb/rlogin
	install -s -o root -g bin -m 4755 rsh ${DESTDIR}/usr/ucb/rsh
I 35
	install -s -o root -g bin -m 4755 eps ${DESTDIR}/usr/ucb/eps
E 35
	install -s -o bin -g kmem -m 2755 gcore ${DESTDIR}/usr/ucb/gcore
	install -s -o bin -g kmem -m 2755 vmstat ${DESTDIR}/usr/ucb/vmstat
	install -s -o bin -g kmem -m 2755 w ${DESTDIR}/usr/ucb/w
	rm -f ${DESTDIR}/usr/ucb/uptime ${DESTDIR}/usr/ucb/f
	ln ${DESTDIR}/usr/ucb/w ${DESTDIR}/usr/ucb/uptime
	ln ${DESTDIR}/usr/ucb/finger ${DESTDIR}/usr/ucb/f
	rm -f ${DESTDIR}/usr/ucb/u
	ln ${DESTDIR}/usr/ucb/users ${DESTDIR}/usr/ucb/u

clean: FRC
	rm -f a.out core *.s *.o
	rm -f ${STD} ${NSTD} ${PERM}
	for i in ${SUBDIR}; do (cd $$i; make ${MFLAGS} clean); done

depend: ldepend
	for i in ${SUBDIR}; do (cd $$i; make ${MFLAGS} depend); done

ldepend: FRC
	mkdep -p ${CFLAGS} ${SRCS}

FRC:

# Files listed in ${NSTD} have explicit make lines given below.

clear:
	${CC} -o $@ ${CFLAGS} clear.c -ltermlib

ul:
	${CC} -o $@ ${CFLAGS} ul.c -ltermlib

vacation:
	${CC} -o $@ ${CFLAGS} vacation.c -ldbm

# DO NOT DELETE THIS LINE -- mkdep uses it.
# DO NOT PUT ANYTHING AFTER THIS LINE, IT WILL GO AWAY.
E 1
